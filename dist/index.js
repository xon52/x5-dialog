!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):"object"==typeof exports?exports["x5-dialog"]=e(require("vue")):t["x5-dialog"]=e(t.vue)}(window,(function(t){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}([function(e,o){e.exports=t},function(t,e,o){var n=o(2),r=o(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var i={insert:"head",singleton:!1},a=(n(r,i),r.locals?r.locals:{});t.exports=a},function(t,e,o){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var t={};return function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}t[e]=o}return t[e]}}(),a=[];function s(t){for(var e=-1,o=0;o<a.length;o++)if(a[o].identifier===t){e=o;break}return e}function l(t,e){for(var o={},n=[],r=0;r<t.length;r++){var i=t[r],l=e.base?i[0]+e.base:i[0],d=o[l]||0,c="".concat(l," ").concat(d);o[l]=d+1;var p=s(c),u={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(a[p].references++,a[p].updater(u)):a.push({identifier:c,updater:x(u,e),references:1}),n.push(c)}return n}function d(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=o.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,p=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function u(t,e,o,n){var r=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=p(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e,o){var n=o.css,r=o.media,i=o.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,h=0;function x(t,e){var o,n,r;if(e.singleton){var i=h++;o=m||(m=d(e)),n=u.bind(null,o,i,!1),r=u.bind(null,o,i,!0)}else o=d(e),n=f.bind(null,o,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(o)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var o=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<o.length;n++){var r=s(o[n]);a[r].references--}for(var i=l(t,e),d=0;d<o.length;d++){var c=s(o[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}o=i}}}},function(t,e,o){(e=o(4)(!1)).push([t.i,"@keyframes shake{14%,70%{transform:translate(-49%, -49%)}28%,56%,84%{transform:translate(-49%, -51%)}42%,98%{transform:translate(-51%, -51%)}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}.fade-enter-active{animation:fade-in 0.2s}.fade-leave-active{animation:fade-in 0.2s reverse}.x5-d-modal-wrapper{height:100%;left:0;position:fixed;top:0;width:100%}.x5-d-modal-wrapper.x5-d-overlay{background-color:#0006;z-index:5}.x5-d-modal-wrapper .x5-d-modal{background-color:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.33);left:50%;max-height:80vh;max-width:500px;overflow:auto;position:fixed;top:50%;transform:translate(-50%, -50%);transition:all 0.3s ease;width:100%}.x5-d-modal-wrapper .x5-d-modal.x5-d-attention{animation:shake 150ms}.x5-d-dialog .x5-d-header{position:relative;font-size:22px;font-weight:bold;background:#fafafa;border-bottom:#eee 1px solid;color:#333;border-radius:2px 2px 0 0;padding:16px 44px 16px 24px}.x5-d-dialog .x5-d-header .x5-d-close{font-size:14px;position:absolute;top:50%;transform:translateY(-50%);right:24px;color:transparent;cursor:pointer;text-shadow:0 0 0 #999}.x5-d-dialog .x5-d-header .x5-d-close:hover{text-shadow:0 0 0 #666}.x5-d-dialog .x5-d-content{max-height:80vh;padding:16px 24px}.x5-d-dialog .x5-d-content input{width:94%;padding:3%;border-radius:2px;border:1px solid #ccc}.x5-d-dialog .x5-d-content p.x5-d-errors{height:14px;color:#c80000;margin:6px 0 0 0;font-size:14px}.x5-d-dialog .x5-d-footer{background:#fbfbfb;border-top:#eee 1px solid;border-radius:0 0 2px 2px;text-align:end}.x5-d-dialog .x5-d-footer button{background-color:transparent;border:0 solid #4442;color:#444;cursor:pointer;font-size:14px;font-weight:bold;height:40px;margin:4px;padding:1px 6px;text-transform:uppercase;width:80px}.x5-d-dialog .x5-d-footer button.x5-d-ok{color:dodgerblue;border-color:#1e90ff80}.x5-d-dialog .x5-d-footer button:hover{border-width:1px}.x5-d-dialog .x5-d-footer button:disabled{color:#ccc;border-width:0;cursor:unset}\n",""]),t.exports=e},function(t,e,o){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o=t[1]||"",n=t[3];if(!n)return o;if(e&&"function"==typeof btoa){var r=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[o].concat(i).concat([r]).join("\n")}var a,s,l;return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o})).join("")},e.i=function(t,o,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&r[l[0]]||(o&&(l[2]?l[2]="".concat(o," and ").concat(l[2]):l[2]=o),e.push(l))}},e}},function(t,e,o){"use strict";o.r(e);var n=o(0),r=o.n(n),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.modal?o("div",{class:"x5-d-modal-wrapper "+(t.options.overlay?"x5-d-overlay":""),on:{click:function(e){return e.target!==e.currentTarget?null:t.overlayClick(e)}}},[o("div",{class:"x5-d-modal "+(t.attention?"x5-d-attention":"")+" "+t.options.class,style:"max-width:"+t.options.width+"px "+t.options.style},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.modal.component?o(t.modal.component,{tag:"component",attrs:{close:t.close,options:t.options}}):o("x5-dialog",{attrs:{close:t.close,options:t.options}})],1)],1)]):t._e()])};i._withStripped=!0;var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"x5-d-dialog"},[t.options.title?o("div",{staticClass:"x5-d-header"},[t._v("\n    "+t._s(t.options.title)+"\n    "),t.options.permanent?t._e():o("span",{staticClass:"x5-d-close",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[t._v("❌")])]):t._e(),t._v(" "),o("div",{staticClass:"x5-d-content"},[t.options.text?o("p",[t._v(t._s(t.options.text))]):t._e(),t._v(" "),t.isPrompt?o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),o("p",{staticClass:"x5-d-errors"},[t._v(t._s(t.errors[0]))])]):t._e()]),t._v(" "),o("div",{staticClass:"x5-d-footer"},[t.isAlert?t._e():o("button",{on:{click:t.cancel}},[t._v(t._s(t.options.labelCancel))]),t._v(" "),o("button",{staticClass:"x5-d-ok",attrs:{disabled:t.errors.length>0},on:{click:t.submit}},[t._v(t._s(t.options.labelOK))])])])};function s(t,e,o,n,r,i,a,s){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=o,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId="data-v-"+i),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,e){return l.call(e),c(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:d}}a._withStripped=!0;var l=s({name:"x5-D-Dialog",props:["close","options"],data(){return{input:null,isAlert:"alert"===this.options.type,isConfirm:"confirm"===this.options.type,isPrompt:"prompt"===this.options.type}},computed:{errors(){return this.isPrompt&&this.options.rules?this.options.rules.map(t=>t(this.input)).filter(t=>!0!==t):[]}},methods:{async cancel(){this.options.onCancel&&this.options.onCancel(),this.close()},async submit(){this.options.onOK&&this.options.onOK(),this.close(!this.isPrompt||this.input)}}},a,[],!1,null,null,null);l.options.__file="src/js/Dialog.vue";var d=s({name:"x5-D-App",components:{x5Dialog:l.exports},data:()=>({attention:!1}),computed:{modal(){return this.$root.modals[0]},options(){return this.modal.options}},methods:{close(t){this.options.onClose&&this.options.onClose(t),this.modal.resolve(t),this.$root.remove()},async overlayClick(){this.options.overlay&&!this.options.permanent?this.close():(this.attention=!0,setTimeout(()=>this.attention=!1,150))}}},i,[],!1,null,null,null);d.options.__file="src/js/App.vue";var c=d.exports;var p=new r.a({name:"x5-D-Plugin",data:{modals:[],options:{zIndex:200},defaultOptions:{width:500,labelOK:"OK",labelCancel:"Cancel",overlay:!0,permanent:!1,rules:[]}},methods:{add(t,e,o){if(!["modal","alert","confirm","prompt"].includes(t))throw new Error(`Invalid type "${t}" used in x5Dialog.`);let n=null;if("modal"===t)n={component:o,options:{...this.defaultOptions,...e}};else if("string"==typeof e)n={options:{...this.defaultOptions,type:t,text:e}};else{if("object"!=typeof e)throw new Error(`Invalid parameter ${JSON.stringify(e)} used in x5Dialog.`);n={options:{...this.defaultOptions,type:t,...e}}}const r=new Promise(t=>n.resolve=t);return this.modals.unshift(n),r},remove(){this.modals=this.modals.slice(1)},setOptions(t){this.options={...this.options,...t}}},render:t=>t(c)});o(1),e.default={modal:(t,e)=>p.add("modal",e,t),alert:t=>p.add("alert",t),confirm:t=>p.add("confirm",t),prompt:t=>p.add("prompt",t),install(t,e){p.setOptions(e);const o=document.createElement("div");o.setAttribute("id","x5-d-vue"),document.body.appendChild(o),p.$mount("#x5-d-vue"),t.prototype.$modal=this.modal,t.prototype.$alert=this.alert,t.prototype.$confirm=this.confirm,t.prototype.$prompt=this.prompt}}}])}));